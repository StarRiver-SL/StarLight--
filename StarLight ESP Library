local StarLight={};getgenv().StarLight=StarLight;local RunService=game:GetService("RunService");local HttpService=game:GetService("HttpService");local Players=game:GetService("Players");local LocalPlayer=Players.LocalPlayer;local Camera=workspace.CurrentCamera;local CoreGui=game:GetService("CoreGui");local TweenService=game:GetService("TweenService");local Updating=true;local Attach;if LocalPlayer.Character then Attach=Instance.new("Attachment",LocalPlayer.Character);Attach.Name="CharTracer" end;LocalPlayer.CharacterAdded:Connect(function()task.wait(1);Attach=Instance.new("Attachment",LocalPlayer.Character);Attach.Name="CharTracer" end);local ESPTable={};local TracersTable={};local ArrowsTable={};local ScreenGui=Instance.new("ScreenGui");ScreenGui.Parent=CoreGui;ScreenGui.ResetOnSpawn=false;ScreenGui.IgnoreGuiInset=true;local TracersFrame=Instance.new("Frame",ScreenGui);TracersFrame.Size=UDim2.new(1,0,1,0);TracersFrame.BackgroundTransparency=1;local ArrowsFrame=Instance.new("Frame",ScreenGui);ArrowsFrame.Size=UDim2.new(1,0,1,0);ArrowsFrame.BackgroundTransparency=1;local HighlightsFolder=Instance.new("Folder",ScreenGui);local BillboardsFolder=Instance.new("Folder",ScreenGui);local arrowTemplate=Instance.new("ImageLabel");arrowTemplate.Image="rbxassetid://2418687610";arrowTemplate.Size=UDim2.new(0,72,0,72);arrowTemplate.AnchorPoint=Vector2.new(0.5,0.5);arrowTemplate.BackgroundTransparency=1;arrowTemplate.ImageTransparency=1;local Constraint=Instance.new("UIAspectRatioConstraint");Constraint.Parent=arrowTemplate;Constraint.AspectRatio=0.75;local Settings={EnableTracers=false,ShowDis=false,Rainbow=false,Arrows=false,ArrowRadius=200,TracerOrigin="Bottom",TracerSize=0.5,TextSize=20,DistanceSizeRatio=1,FillTransparency=0.75,OutlineTransparency=0,TextTransparency=0,TextOutlineTransparency=0,FadeTime=0,Font=Enum.Font.Oswald,OutlineColor=Color3.fromRGB(255,255,255),RainbowColor=Color3.fromRGB(255,255,255),MatchColors=true,RemoveIfNotVisible=true};local RainbowTable={HueSetup=0,Hue=0,Step=0,Color=Color3.new(),Enabled=false};local ColorTable={};local TextTable={};local Labels={};local Highlights={};local Lines={};function StarLight:GenerateRandomString()return HttpService:GenerateGUID(false)end;function StarLight:ShowDistance(Value)Settings.ShowDis=Value end;function StarLight:SetTracers(Value)Settings.EnableTracers=Value;TracersFrame.Visible=Value end;function StarLight:SetArrows(Value)Settings.Arrows=Value;ArrowsFrame.Visible=Value end;function StarLight:SetArrowRadius(Value)Settings.ArrowRadius=Value end;function StarLight:SetTracerOrigin(Value)Settings.TracerOrigin=Value end;function StarLight:SetTracerSize(Value)Settings.TracerSize=0.5*Value end;function StarLight:SetTextSize(Value)Settings.TextSize=Value;for _,Label in pairs(Labels)do Label.TextSize=Value end end;function StarLight:SetFillTransparency(Value)Settings.FillTransparency=Value;for _,Highlight in pairs(Highlights)do if Highlight:IsA("Highlight")then Highlight.FillTransparency=Value end end end;function StarLight:SetOutlineTransparency(Value)Settings.OutlineTransparency=Value;for _,Highlight in pairs(Highlights)do if Highlight:IsA("Highlight")then Highlight.OutlineTransparency=Value end end end;function StarLight:SetTextTransparency(Value)Settings.TextTransparency=Value;for _,Label in pairs(Labels)do Label.TextTransparency=Value end end;function StarLight:SetTextOutlineTransparency(Value)Settings.TextOutlineTransparency=Value;for _,Label in pairs(Labels)do Label.TextStrokeTransparency=Value end end;function StarLight:SetFont(Value)Settings.Font=Value;for _,Label in pairs(Labels)do Label.Font=Value end end;function StarLight:SetRainbow(Value)Settings.Rainbow=Value end;function StarLight:SetMatchColors(Value)Settings.MatchColors=Value end;function StarLight:SetOutlineColor(Value)Settings.OutlineColor=Value end;function StarLight:SetFadeTime(Value)Settings.FadeTime=Value end;function StarLight:SetDistanceSizeRatio(Value)Settings.DistanceSizeRatio=Value end;local function CreateTracer(Part)local TruePart;if Part:IsA("BasePart")then TruePart=Part elseif Part:IsA("Model")then TruePart=Part:FindFirstChildWhichIsA("BasePart")end;if TruePart and Attach then if TruePart:FindFirstChild("ESP_Tracers")then return end;local AttachPart=Instance.new("Attachment",TruePart);AttachPart.Name="ESP_Tracers";local Beam=Instance.new("Beam",TruePart);Beam.Attachment0=Attach;Beam.Attachment1=AttachPart;Beam.Enabled=false;Beam.Name="ESPBeam";Beam.Width0=0.03;Beam.Width1=0.03;Beam.FaceCamera=true;Beam.Color=ColorSequence.new(Color3.new(1,1,1));table.insert(TracersTable,Beam)end end;function StarLight:AddESP(Part,Txt,Color)if Part:FindFirstChild("ESP_System")then return end;table.insert(ESPTable,Part);CreateTracer(Part);local Highlight=Instance.new("Highlight",Part);Highlight.Name="ESP_System";Highlight.FillColor=Color;Highlight.Enabled=true;Highlight.Adornee=Part;Highlight.FillTransparency=1;Highlight.OutlineTransparency=1;Highlights[Part]=Highlight;local BillboardGui=Instance.new("BillboardGui",Part);BillboardGui.Name="ESP_GUI";BillboardGui.Size=UDim2.new(0,1,0,1);BillboardGui.MaxDistance=math.huge;BillboardGui.Enabled=true;BillboardGui.AlwaysOnTop=true;local TextLabel=Instance.new("TextLabel",BillboardGui);TextLabel.Text=Txt;TextLabel.TextSize=Settings.TextSize;TextLabel.Size=UDim2.new(0,1,0,1);TextLabel.Font=Settings.Font;TextLabel.TextColor3=Color;TextLabel.Name="Txt";TextLabel.TextYAlignment=Enum.TextYAlignment.Bottom;TextLabel.TextStrokeTransparency=Settings.TextOutlineTransparency;TextLabel.BackgroundTransparency=1;TextLabel.TextTransparency=1;local UIScale2=Instance.new("UIScale",TextLabel);UIScale2.Scale=1;local TextLabel2=Instance.new("TextLabel",BillboardGui);TextLabel2.Text="[unknown]";TextLabel2.TextSize=Settings.TextSize;TextLabel2.Size=UDim2.new(0,1,0,1);TextLabel2.TextColor3=Color3.new(1,1,1);TextLabel2.Name="DistanceMarker";TextLabel2.BackgroundTransparency=1;TextLabel2.Font=Settings.Font;TextLabel2.TextStrokeTransparency=Settings.TextOutlineTransparency;TextLabel2.TextYAlignment=Enum.TextYAlignment.Top;TextLabel2.TextTransparency=1;TextLabel2.Visible=Settings.ShowDis;local UIScale=Instance.new("UIScale",TextLabel2);UIScale.Scale=1;Labels[Part]=TextLabel;TextTable[Part]=Txt;ColorTable[Part]=Color;TweenService:Create(Highlight,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{FillTransparency=Settings.FillTransparency}):Play();TweenService:Create(Highlight,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{OutlineTransparency=Settings.OutlineTransparency}):Play();TweenService:Create(TextLabel,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{TextTransparency=Settings.TextTransparency}):Play();TweenService:Create(TextLabel2,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{TextTransparency=Settings.TextTransparency}):Play();Part:GetPropertyChangedSignal("Parent"):Connect(function(Parent)if not Parent then StarLight:RemoveESP(Part)end end);local lineFrame=Instance.new("Frame");lineFrame.Size=UDim2.new(0,0,0,0);lineFrame.BackgroundTransparency=1;lineFrame.AnchorPoint=Vector2.new(0.5,0.5);lineFrame.Parent=TracersFrame;local stroke=Instance.new("UIStroke");stroke.Thickness=Settings.TracerSize;stroke.ApplyStrokeMode=Enum.ApplyStrokeMode.Border;stroke.Transparency=1;stroke.Parent=lineFrame;Lines[Part]={lineFrame,stroke};TweenService:Create(lineFrame,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{BackgroundTransparency=0}):Play();TweenService:Create(stroke,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{Transparency=0}):Play();if Settings.Arrows then local arrow=arrowTemplate:Clone();arrow.Parent=ArrowsFrame;ArrowsTable[Part]=arrow;TweenService:Create(arrow,TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{ImageTransparency=0}):Play()end end;function StarLight:RemoveESP(Part)for i,part in pairs(ESPTable)do if part==Part then table.remove(ESPTable,i)break end end;for _,v in ipairs(Part:GetChildren())do if v.Name=="ESP_System" or v.Name=="ESP_GUI" or v.Name=="ESPBeam" or v.Name=="ESP_Tracers" then v:Destroy()end end;for Trace,v in ipairs(TracersTable)do if v==Part then table.remove(TracersTable,Trace)break end end;for _,Tracerobj in pairs(Part:GetDescendants())do if Tracerobj.Name=="ESPBeam" or Tracerobj.Name=="ESP_Tracers" then Tracerobj:Destroy()end end;if Highlights[Part]then TweenService:Create(Highlights[Part],TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{FillTransparency=1}):Play();TweenService:Create(Highlights[Part],TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{OutlineTransparency=1}):Play();Highlights[Part]:Destroy();Highlights[Part]=nil end;if Labels[Part]then TweenService:Create(Labels[Part],TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{TextTransparency=1}):Play()end;if Lines[Part]then TweenService:Create(Lines[Part][1],TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{BackgroundTransparency=1}):Play();TweenService:Create(Lines[Part][2],TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{Transparency=1}):Play();Lines[Part][1]:Destroy();Lines[Part][2]:Destroy();Lines[Part]=nil end;if ArrowsTable[Part]then TweenService:Create(ArrowsTable[Part],TweenInfo.new(Settings.FadeTime,Enum.EasingStyle.Quad),{ImageTransparency=1}):Play();ArrowsTable[Part]:Destroy();ArrowsTable[Part]=nil end end;function StarLight:Unload()Updating=false;for _,Object in ipairs(ESPTable)do if Object then StarLight:RemoveESP(Object)end end;ESPTable={};TracersTable={};ArrowsTable={};getgenv().StarLight=nil;ScreenGui:Destroy()end;local Con;local Time=0;Con=RunService.Heartbeat:Connect(function(dt)Time=Time+dt;if Time>0.05 then Time=0;if Updating==false then Con:Disconnect();Con=nil end;if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")then for _,Object in ipairs(ESPTable)do if Object and Object:FindFirstChild("ESP_GUI")then local GuiObj=Object:FindFirstChild("ESP_GUI");local GuiDistance=GuiObj:FindFirstChild("DistanceMarker");local GuiTxt=GuiObj:FindFirstChild("Txt");if GuiDistance then GuiDistance.Visible=Settings.ShowDis end;if Workspace.CurrentCamera~=nil then local FOV=Workspace.CurrentCamera.FieldOfView;local scale=1;if FOV==120 then scale=2.4 elseif FOV==80 then scale=1.5 elseif FOV>80 and FOV<90 then scale=1.7 elseif FOV==70 then scale=1 end;if GuiTxt and GuiTxt:FindFirstChild("UIScale")then GuiTxt.UIScale.Scale=scale end;if GuiDistance and GuiDistance:FindFirstChild("UIScale")then GuiDistance.UIScale.Scale=scale end end;for _,Tracer in pairs(TracersTable)do if Tracer then Tracer.Enabled=Settings.EnableTracers end end;local Pos=Object:IsA("Model")and Object:GetPivot().Position or Object:IsA("BasePart")and Object.Position or Vector3.new(0,0,0);local Distance=math.floor((LocalPlayer.Character.HumanoidRootPart.Position-Pos).Magnitude);if GuiDistance then GuiDistance.Text="["..Distance.."m]" end;local screenPoint,onScreen=Camera:WorldToViewportPoint(Pos);if GuiObj then GuiObj.Enabled=onScreen or not Settings.RemoveIfNotVisible end;if Lines[Object]then Lines[Object][1].Visible=onScreen and Settings.EnableTracers;if onScreen and Settings.EnableTracers then local origin;if Settings.TracerOrigin=="Center"then origin=Vector2.new(Camera.ViewportSize.X/2,Camera.ViewportSize.Y/2)elseif Settings.TracerOrigin=="Top"then origin=Vector2.new(Camera.ViewportSize.X/2,0)elseif Settings.TracerOrigin=="Mouse"then origin=Vector2.new(game:GetService("UserInputService"):GetMouseLocation().X,game:GetService("UserInputService"):GetMouseLocation().Y)else origin=Vector2.new(Camera.ViewportSize.X/2,Camera.ViewportSize.Y)end;local destination=Vector2.new(screenPoint.X,screenPoint.Y);local position=(origin+destination)/2;local rotation=math.deg(math.atan2(destination.Y-origin.Y,destination.X-origin.X));local length=(origin-destination).Magnitude;Lines[Object][1].Position=UDim2.new(0,position.X,0,position.Y);Lines[Object][1].Size=UDim2.new(0,length,0,1);Lines[Object][1].Rotation=rotation;Lines[Object][1].BackgroundColor3=Settings.Rainbow and RainbowTable.Color or ColorTable[Object] or Color3.fromRGB(255,255,255);Lines[Object][2].Color=Lines[Object][1].BackgroundColor3;Lines[Object][2].Thickness=Settings.TracerSize end end;if ArrowsTable[Object]then ArrowsTable[Object].Visible=not onScreen and Settings.Arrows;if not onScreen and Settings.Arrows then local screenSize=Camera.ViewportSize;local screenCenter=Vector2.new(screenSize.X/2,screenSize.Y/2);local toObj=(Pos-Camera.CFrame.Position).Unit;local camForward=Camera.CFrame.LookVector;local dir=Vector2.new(screenPoint.X,screenPoint.Y)-screenCenter;local dot=camForward:Dot(toObj);if dot<0 then dir=-dir end;local angle=math.atan2(dir.Y,dir.X);local radius=math.min(screenSize.X,screenSize.Y)/2-(400-Settings.ArrowRadius);local arrowPos=screenCenter+dir.Unit*radius;ArrowsTable[Object].Position=UDim2.new(0,arrowPos.X,0,arrowPos.Y);ArrowsTable[Object].Rotation=math.deg(angle)-180;ArrowsTable[Object].ImageColor3=Settings.Rainbow and RainbowTable.Color or ColorTable[Object] or Color3.fromRGB(255,255,255)end end;if GuiTxt then GuiTxt.TextColor3=Settings.Rainbow and RainbowTable.Color or ColorTable[Object] or Color3.fromRGB(255,255,255);GuiTxt.Text=TextTable[Object]..(Settings.ShowDis and "\n"..'<font size="'..math.round(Settings.TextSize*Settings.DistanceSizeRatio)..'">['..math.floor((LocalPlayer.Character.HumanoidRootPart.Position-(Object:IsA("Model")and Object:GetPivot().Position or Object:IsA("BasePart")and Object.Position or Vector3.new(0,0,0))).Magnitude)..']</font>' or "")end;if Highlights[Object]then Highlights[Object].FillColor=Settings.Rainbow and RainbowTable.Color or ColorTable[Object] or Color3.fromRGB(255,255,255);Highlights[Object].OutlineColor=Settings.MatchColors and Highlights[Object].FillColor or Settings.OutlineColor end end end end end end);RunService.RenderStepped:Connect(function(Delta)RainbowTable.Step=RainbowTable.Step+Delta;if RainbowTable.Step>=(1/60)then RainbowTable.Step=0;RainbowTable.HueSetup=RainbowTable.HueSetup+(1/400);if RainbowTable.HueSetup>1 then RainbowTable.HueSetup=0 end;RainbowTable.Hue=RainbowTable.HueSetup;RainbowTable.Color=Color3.fromHSV(RainbowTable.Hue,0.8,1);Settings.RainbowColor=Color3.fromHSV(RainbowTable.Hue,0.8,1)end end);workspace:GetPropertyChangedSignal("CurrentCamera"):Connect(function()Camera=workspace.CurrentCamera end);return StarLight
